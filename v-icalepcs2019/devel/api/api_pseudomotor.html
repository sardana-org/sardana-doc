

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pseudo motor API reference &mdash; sardana 3.0.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="sardana 3.0.2-alpha documentation" href="../../index.html"/>
        <link rel="up" title="Sardana API" href="api_sardana.html"/>
        <link rel="next" title="Pseudo counter API reference" href="api_pseudocounter.html"/>
        <link rel="prev" title="Trigger/Gate API reference" href="api_triggergate.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_test/index.html">Sardana Testing</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="api_sardana.html">API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="api_macro.html">Macro API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_controller.html">Controller API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_motor.html">Motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_IOR.html">I/O register</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_countertimer.html">Counter/timer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_0D.html">0D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_1D.html">1D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_2D.html">2D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_triggergate.html">Trigger/gate API</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Pseudo motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pseudocounter.html">Pseudo counter API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_measurementgroup.html">Measurement group API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_macroserver.html">MacroServer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pool.html">Pool API</a></li>
<li class="toctree-l4"><a class="reference internal" href="sardana/sardana.html">Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_test.html">Test API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration.html">Migration guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">sardana</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../docs.html">Sardana 3.0 Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">Developer&#8217;s Guide</a> &raquo;</li>
      
          <li><a href="api_sardana.html">Sardana API</a> &raquo;</li>
      
    <li>Pseudo motor API reference</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/devel/api/api_pseudomotor.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pseudo-motor-api-reference">
<span id="sardana-pseudomotor-api"></span><h1>Pseudo motor API reference<a class="headerlink" href="#pseudo-motor-api-reference" title="Permalink to this headline">¶</a></h1>
<p>A pseudo motor has a <code class="docutils literal"><span class="pre">state</span></code>, and a <code class="docutils literal"><span class="pre">position</span></code> attributes. The state
indicates at any time if the pseudo motor is stopped, in alarm or moving. The
state is composed from the states of all the physical motors involved in the
pseudo motor. So, if one of the motors is in moving or alarm state, the whole
pseudo motor will be in that state. The position, indicates the current
position.</p>
<p>The other pseudo motor&#8217;s attributes are:</p>
<div class="section" id="drift-correction">
<span id="sardana-pseudomotor-api-driftcorrection"></span><h2>drift correction<a class="headerlink" href="#drift-correction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Flag to enable/disable drift correction while calculating physical
motor(s) position(s). When enabled, the write sibling(s) position(s) will
be used, when disabled, the read sibiling(s) position(s) will be
used instead. By default drift correction is enabled. For more details,
see <a class="reference internal" href="#drift-section"><span class="std std-ref">Drift Correction</span></a>.</p>
<p><a class="reference internal" href="sardana/pool/poolpseudomotor.html#sardana.pool.poolpseudomotor.PoolPseudoMotor.drift_correction" title="sardana.pool.poolpseudomotor.PoolPseudoMotor.drift_correction"><code class="xref py py-attr docutils literal"><span class="pre">drift_correction</span></code></a></p>
</div></blockquote>
</div>
<div class="section" id="siblings">
<h2>siblings<a class="headerlink" href="#siblings" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>List of other pseudo motor objects that belongs to the same controller.</p>
<p><a class="reference internal" href="sardana/pool/poolpseudomotor.html#sardana.pool.poolpseudomotor.PoolPseudoMotor.siblings" title="sardana.pool.poolpseudomotor.PoolPseudoMotor.siblings"><code class="xref py py-attr docutils literal"><span class="pre">siblings</span></code></a></p>
</div></blockquote>
<p>The available operations are:</p>
</div>
<div class="section" id="start-move-absolute">
<h2>start move absolute<a class="headerlink" href="#start-move-absolute" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Starts to move the pseudo motor to the given absolute position.</p>
<p><a class="reference internal" href="sardana/pool/poolpseudomotor.html#sardana.pool.poolpseudomotor.PoolPseudoMotor.start_move" title="sardana.pool.poolpseudomotor.PoolPseudoMotor.start_move"><code class="xref py py-meth docutils literal"><span class="pre">start_move()</span></code></a></p>
</div></blockquote>
</div>
<div class="section" id="stop">
<h2>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Stops the pseudo motor motion, by stopping all the physical motors, in an
orderly fashion.</div></blockquote>
</div>
<div class="section" id="abort">
<h2>abort<a class="headerlink" href="#abort" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Stops the pseudo motor motion, by stopping all the physical motors, as
fast as possible (possibly without deceleration time and loss of position).</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="../overview/overview_pseudomotor.html#sardana-pseudomotor-overview"><span class="std std-ref">Pseudo motor overview</span></a></dt>
<dd>the pseudo-motor overview</dd>
<dt><a class="reference internal" href="sardana/tango/pool/PseudoMotor.html#sardana.tango.pool.PseudoMotor.PseudoMotor" title="sardana.tango.pool.PseudoMotor.PseudoMotor"><code class="xref py py-class docutils literal"><span class="pre">PseudoMotor</span></code></a></dt>
<dd>the pseudo-motor tango device <a class="reference internal" href="../../glossary.html#term-api"><span class="xref std std-term">API</span></a></dd>
</dl>
</div>
</div>
<div class="section" id="pseudomotor-position">
<span id="sardana-pseudomotor-api-position"></span><h2>PseudoMotor position<a class="headerlink" href="#pseudomotor-position" title="Permalink to this headline">¶</a></h2>
<p>The pseudomotor&#8217;s current position can be obtained by reading the
position attribute. The diagram shows the internal sequence of calls.
As it is shown on this picture this process is divided into two parts. First
the physical <a class="reference internal" href="api_motor.html#sardana-motor-api-position"><span class="std std-ref">motor positions are read</span></a>
from the hardware. Later these motor positions are used to calculate the
pseudo position.</p>
<a class="reference internal image-reference" href="../../_images/sardana_server_internal_pseudomotor_read_position_flow.png"><img alt="../../_images/sardana_server_internal_pseudomotor_read_position_flow.png" class="align-center" src="../../_images/sardana_server_internal_pseudomotor_read_position_flow.png" style="width: 680px;" /></a>
</div>
<div class="section" id="motion">
<h2>Motion<a class="headerlink" href="#motion" title="Permalink to this headline">¶</a></h2>
<p>The most useful thing to do with a pseudo motor is, of course, to move it. To
move a pseudo motor to another absolute position you have to write the value
into the position attribute.</p>
<a class="reference internal image-reference" href="../../_images/sardana_server_internal_pseudomotor_write_position_flow.png"><img alt="../../_images/sardana_server_internal_pseudomotor_write_position_flow.png" class="align-center" src="../../_images/sardana_server_internal_pseudomotor_write_position_flow.png" style="width: 680px;" /></a>
<p>Please refer to
<a class="reference internal" href="sardana/pool/poolpseudomotor.html#sardana.pool.poolpseudomotor.PoolPseudoMotor.get_siblings_positions" title="sardana.pool.poolpseudomotor.PoolPseudoMotor.get_siblings_positions"><code class="xref py py-meth docutils literal"><span class="pre">get_siblings_positions()</span></code></a>
for more details about <code class="docutils literal"><span class="pre">use</span></code> and <code class="docutils literal"><span class="pre">write_pos</span></code> arguments. The value of the
last one corresponds to the <a class="reference internal" href="#sardana-pseudomotor-api-driftcorrection"><span class="std std-ref">drift correction</span></a>
attribute value.</p>
<p>After all calculations are done, the pseudo motor will deploy a motion <em>job</em>
into the sardana kernel engine which will trigger a series of calls to the
underlying motor(s) controller.</p>
<div class="section" id="drift-section">
<span id="id1"></span><h3>Drift correction<a class="headerlink" href="#drift-section" title="Permalink to this headline">¶</a></h3>
<p>Pseudomotors which have siblings and are based on physical motors with an
inaccurate or a finite precision positioning system could be affected by the
drift effect.</p>
<p><strong>Why does it happen?</strong></p>
<blockquote>
<div>Each move of a pseudomotor requires calculation of the physical motors
positions in accordance with the current positions of its siblings.
The consecutive movements of a pseudomotor can accumulate errors
of the positioning system and cause drift of its siblings.</div></blockquote>
<p><strong>Who is affected?</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>Inaccurate positioning systems</strong> which lead to a discrepancy between
the write and the read position of the physical motors. In this case the
physical motors must have a position sensor e.g. encoder but
must not be configured in <a class="reference internal" href="../../glossary.html#term-closed-loop"><span class="xref std std-term">closed loop</span></a> (in some special cases,
where the closed loop is not precise enough, the drift effect can be
observed as well). This setup can lead to the situation where write and
read values of the position attribute of the physical motors are
different e.g. due to the loosing steps problems or the inaccurate
<em>step_per_unit</em> calibration.</li>
<li><strong>Finite precision physical motors</strong> e.g. <a class="reference internal" href="../../glossary.html#term-stepper"><span class="xref std std-term">stepper</span></a> is affected by
the rounding error when moving to a position which does not translate
into a discrete number of steps that must be commanded to the hardware.</li>
</ul>
</div></blockquote>
<p><strong>How is it solved in Sardana?</strong></p>
<blockquote>
<div><p>Sardana implements the drift correction which use is optional but enabled
by default for all pseudomotors. It is based on the use of the write
value, instead of the read value, of the siblings&#8217; positions, together with
the new desired position of the pseudomotor being moved, during the
calculation of the physical positions. The write value of the
pseudomotor&#8217;s position gets updated at each move of the pseudomotor or
any of the underneath motors.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Movements being stopped unexpectedly: abort by the user,
over-travel limit or any other exceptional condition may cause
considerable discrepancy in the motor&#8217;s write and read positions.
In the subsequent pseudomotor&#8217;s move, Sardana will also correct this
difference by using the write instead of read values.</p>
</div>
<p>The drift correction is configurable with the <em>DriftCorrection</em> property
either globally (on the Pool device level) or locally (on each PseudoMotor
device level).</p>
</div></blockquote>
<p><strong>Example</strong></p>
<p>Let&#8217;s use the slit pseudomotor controller to visualize the drift effect.
This controller comprises two pseudomotors: gap and offset, each of them based
on the same two physical motors: right and left. In this example we will
simulate the inaccurate positioning of the left motor (loosing of 0.002 unit
every 1 unit move).</p>
<p><em>Drift correction disabled</em></p>
<ol class="arabic">
<li><p class="first">Initial state: gap and offset are at positions 0 (gap totally closed and
offset at the nominal position)</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [1]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          0.000          0.000          0.000          0.000</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Move gap to 1</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [2]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<p>The calculation of the physical motors&#8217; positions gives us 0.5 for both right
and left (in accordance with the current offset of 0)</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [3]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          0.500          0.498          0.998          0.001</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired
position of 1 due to the left&#8217;s positioning problem. Left&#8217;s
position write and read discrepancy of 0.002 causes that the gap reached
only 0.998 and that the offset drifted to 0.001.</p>
</li>
<li><p class="first">Move gap to 2</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [4]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">2</span>
</pre></div>
</div>
</div></blockquote>
<p>The calculation of the physical motors&#8217; positions gives us 1.001 for right
and 0.999 for left (in accordance with the current offset of 0.001).</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [5]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          1.001          0.997          1.998          0.002</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired position of 2
due to the left&#8217;s positioning problem. Left&#8217;s position write and
read discrepancy of 0.002 causes that the gap reached only 1.998 and that
the offset drifted again by 0.001 and the total accumulated drift is 0.002.</p>
</li>
<li><p class="first">Move gap to 3</p>
<p>The calculation of the physical motors&#8217; positions gives us 1.502 for right
and 1.498 for left (in accordance with the current offset of 0.002).</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [6]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">3</span>

<span class="gp">Door_lab_1 [7]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          1.502          1.496          2.998          0.003</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired position of 3
due to the left&#8217;s positioning problem. Left&#8217;s position write and
read discrepancy of 0.002 causes that the gap reached only 2.998 and that
the offset drifted by 0.001 and the total accumulated drift is 0.003.</p>
</li>
</ol>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/drift_correction_disabled.png"><img alt="../../_images/drift_correction_disabled.png" src="../../_images/drift_correction_disabled.png" style="width: 680px;" /></a>
<p class="caption"><span class="caption-text">This sketch demonstrates the above example where offset drifted by 0.003.</span></p>
</div>
<p><em>Drift correction enabled</em></p>
<ol class="arabic">
<li><p class="first">Initial state: gap and offset are at positions 0 (gap totally closed and
offset at the nominal position)</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [1]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          0.000          0.000          0.000          0.000</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Move gap to 1</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [2]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<p>The calculation of the physical motors&#8217; positions gives us 0.5 for both right
and left (in accordance with the <strong>last set</strong> offset of 0).</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [3]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          0.500          0.498          0.998          0.001</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired position of 1
due to the left&#8217;s positioning problem. Left&#8217;s position write and
read discrepancy of 0.002 causes that the gap reached only 0.998 and that
the offset drifted to 0.001.</p>
</li>
<li><p class="first">Move gap to 2</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [4]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">2</span>
</pre></div>
</div>
</div></blockquote>
<p>The calculation of the physical motors&#8217; positions gives us 1 for right
and 1 for left (in accordance to the <strong>last set</strong> offset 0).</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [5]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          1.000          0.998          1.998          0.001</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired position of 2
due to the left&#8217;s positioning problem. Left&#8217;s position write and
read discrepancy of 0.002 causes that the gap reached only 1.998 and that
the offset drifted again by 0.001 but thanks to the drift correction is
maintained at this value.</p>
</li>
<li><p class="first">Move gap to 3</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [6]: </span><span class="n">mv</span> <span class="n">gap</span> <span class="mi">3</span>
</pre></div>
</div>
</div></blockquote>
<p>The calculation of the physical motors&#8217; positions gives us 1.5 for right
and 1.5 for left (in accordance to the <strong>last set</strong> offset of 0).</p>
<blockquote>
<div><div class="highlight-spock"><div class="highlight"><pre><span></span><span class="gp">Door_lab_1 [7]: </span><span class="n">wm</span> <span class="n">right</span> <span class="n">left</span> <span class="n">gap</span> <span class="n">offset</span>
<span class="go">                  right           left            gap         offset</span>
<span class="go">User</span>
<span class="go"> High     Not specified  Not specified  Not specified  Not specified</span>
<span class="go"> Current          1.500          1.498          2.998          0.001</span>
<span class="go"> Low      Not specified  Not specified  Not specified  Not specified</span>
</pre></div>
</div>
</div></blockquote>
<p>We observe that the gap pseudomotor did not reach the desired position of 3
due to the left&#8217;s positioning problem. Left&#8217;s position write and
read discrepancy of 0.002 causes that the gap reached only 2.998 and that
the offset drifted again by 0.001 but thanks to the drift correction is
maintained at this value.</p>
</li>
</ol>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/drift_correction_enabled.png"><img alt="../../_images/drift_correction_enabled.png" src="../../_images/drift_correction_enabled.png" style="width: 680px;" /></a>
<p class="caption"><span class="caption-text">This sketch demonstrates the above example where offset&#8217;s drift was
corrected.</span></p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_pseudocounter.html" class="btn btn-neutral float-right" title="Pseudo counter API reference" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api_triggergate.html" class="btn btn-neutral" title="Trigger/Gate API reference" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.0.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>