

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sardana.macroserver.macros.expert &mdash; sardana 2.7.3-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="sardana 2.7.3-alpha documentation" href="../../../../index.html"/>
        <link rel="up" title="Module code" href="../../../index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">sardana</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
      
    <li>sardana.macroserver.macros.expert</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for sardana.macroserver.macros.expert</h1><div class="highlight"><pre>
<span></span><span class="c1">##############################################################################</span>
<span class="c1">##</span>
<span class="c1"># This file is part of Sardana</span>
<span class="c1">##</span>
<span class="c1"># http://www.sardana-controls.org/</span>
<span class="c1">##</span>
<span class="c1"># Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span>
<span class="c1">##</span>
<span class="c1"># Sardana is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1"># Sardana is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU Lesser General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c1"># along with Sardana.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">##</span>
<span class="c1">##############################################################################</span>

<span class="sd">&quot;&quot;&quot;Expert macros&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;addctrllib&quot;</span><span class="p">,</span> <span class="s2">&quot;addmaclib&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_ctrllib&quot;</span><span class="p">,</span> <span class="s2">&quot;defctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;defelem&quot;</span><span class="p">,</span>
           <span class="s2">&quot;defm&quot;</span><span class="p">,</span> <span class="s2">&quot;defmeas&quot;</span><span class="p">,</span> <span class="s2">&quot;edctrlcls&quot;</span><span class="p">,</span> <span class="s2">&quot;edctrllib&quot;</span><span class="p">,</span> <span class="s2">&quot;prdef&quot;</span><span class="p">,</span>
           <span class="s2">&quot;relctrlcls&quot;</span><span class="p">,</span> <span class="s2">&quot;relctrllib&quot;</span><span class="p">,</span> <span class="s2">&quot;rellib&quot;</span><span class="p">,</span> <span class="s2">&quot;relmac&quot;</span><span class="p">,</span> <span class="s2">&quot;relmaclib&quot;</span><span class="p">,</span>
           <span class="s2">&quot;send2ctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;udefctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;udefelem&quot;</span><span class="p">,</span> <span class="s2">&quot;udefmeas&quot;</span><span class="p">,</span> <span class="s2">&quot;sar_info&quot;</span><span class="p">]</span>

<span class="n">__docformat__</span> <span class="o">=</span> <span class="s1">&#39;restructuredtext&#39;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">array</span>

<span class="kn">from</span> <span class="nn">sardana.macroserver.msexception</span> <span class="k">import</span> <span class="n">UnknownMacroLibrary</span>
<span class="kn">from</span> <span class="nn">sardana.macroserver.msparameter</span> <span class="k">import</span> <span class="n">WrongParam</span>
<span class="kn">from</span> <span class="nn">sardana.macroserver.macro</span> <span class="k">import</span> <span class="n">Macro</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">ParamRepeat</span><span class="p">,</span> <span class="n">Table</span><span class="p">,</span> <span class="n">LibraryError</span>

<span class="c1">##########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Configuration related macros</span>
<span class="c1">#</span>
<span class="c1">##########################################################################</span>


<div class="viewcode-block" id="defm"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.defm">[docs]</a><span class="k">class</span> <span class="nc">defm</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a new motor in the active pool&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;motor name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;motor name&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;controller&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Controller</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Controller name&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;axis&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;motor axis&#39;</span><span class="p">],</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;Created </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span></div>


<div class="viewcode-block" id="defmeas"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.defmeas">[docs]</a><span class="k">class</span> <span class="nc">defmeas</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new measurement group. First channel in channel_list MUST</span>
<span class="sd">    be an internal sardana channel. At least one channel MUST be a</span>
<span class="sd">    Counter/Timer (by default, the first Counter/Timer in the list will</span>
<span class="sd">    become the master).&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Measurement group name&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;channel_list&#39;</span><span class="p">,</span>
            <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="s1">&#39;Measurement Channel&#39;</span><span class="p">],),</span>
            <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of measurement channels&#39;</span><span class="p">],</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">channel_list</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>

        <span class="n">mntgrp_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findObjs</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">type_class</span><span class="o">=</span><span class="n">Type</span><span class="o">.</span><span class="n">MeasurementGroup</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mntgrp_list</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;A measurement group with that name already exists&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">channel_list</span><span class="p">):</span>
        <span class="n">channel0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObj</span><span class="p">(</span><span class="n">channel_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">channel0</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">mg</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">createMeasurementGroup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">channel_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;Created </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">mg</span><span class="p">))</span></div>


<div class="viewcode-block" id="udefmeas"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.udefmeas">[docs]</a><span class="k">class</span> <span class="nc">udefmeas</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes existing measurement groups&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;mntgrps&#39;</span><span class="p">,</span>
         <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;mntgrp&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">MeasurementGroup</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="s1">&#39;Measurement group name&#39;</span><span class="p">],</span>
                     <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
         <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of measurement group names&#39;</span><span class="p">],</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mntgrps</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">mntgrp</span> <span class="ow">in</span> <span class="n">mntgrps</span><span class="p">:</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="n">mntgrp</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
            <span class="n">pool</span><span class="o">.</span><span class="n">deleteMeasurementGroup</span><span class="p">(</span><span class="n">mntgrp</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span></div>


<div class="viewcode-block" id="defelem"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.defelem">[docs]</a><span class="k">class</span> <span class="nc">defelem</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates an element on a controller with an axis&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;new element name&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;ctrl&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Controller</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;existing controller&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;axis&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;axis in the controller (default is -1, meaning add to the end)&#39;</span><span class="p">],</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">ctrl</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">ctrl</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;Created </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span></div>


<span class="k">class</span> <span class="nc">renameelem</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Renames any type of Pool elements apart of Pools.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;element&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">PoolElement</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;element to be renamed&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;new_name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;new name&#39;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Pool&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">WrongParam</span><span class="p">(</span><span class="s1">&#39;Pool elements can not be renamed&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">old_name</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">renameElement</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;Renamed </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">))</span>


<div class="viewcode-block" id="udefelem"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.udefelem">[docs]</a><span class="k">class</span> <span class="nc">udefelem</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes existing elements&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;elements&#39;</span><span class="p">,</span>
         <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;element&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;element name&#39;</span><span class="p">],</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
         <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of element(s) name&#39;</span><span class="p">],</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elements</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
            <span class="n">pool</span><span class="o">.</span><span class="n">deleteElement</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span></div>


<div class="viewcode-block" id="defctrl"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.defctrl">[docs]</a><span class="k">class</span> <span class="nc">defctrl</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a new controller</span>
<span class="sd">    &#39;role_prop&#39; is a sequence of roles and/or properties.</span>
<span class="sd">    - A role is defined as &lt;role name&gt;=&lt;role value&gt; (only applicable to pseudo controllers)</span>
<span class="sd">    - A property is defined as &lt;property name&gt; &lt;property value&gt;</span>

<span class="sd">    If both roles and properties are supplied, all roles must come before properties.</span>
<span class="sd">    All controller properties that don&#39;t have default values must be given.</span>

<span class="sd">    Example of creating a motor controller (with a host and port properties):</span>

<span class="sd">    [1]: defctrl SuperMotorController myctrl host homer.springfield.com port 5000</span>

<span class="sd">    Example of creating a Slit pseudo motor (sl2t and sl2b motor roles, Gap and</span>
<span class="sd">    Offset pseudo motor roles):</span>

<span class="sd">    [1]: defctrl Slit myslit sl2t=mot01 sl2b=mot02 Gap=gap01 Offset=offset01&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;class&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">ControllerClass</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;controller class&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;new controller name&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;roles_props&#39;</span><span class="p">,</span>
                  <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;role_prop&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="s1">&#39;a role or property item&#39;</span><span class="p">],</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
                  <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;roles and/or properties&#39;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_class</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">props</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">ctrl_class</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">createController</span><span class="p">(</span><span class="n">ctrl_class</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">props</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="s2">&quot;Created </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span></div>


<div class="viewcode-block" id="udefctrl"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.udefctrl">[docs]</a><span class="k">class</span> <span class="nc">udefctrl</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deletes existing controllers&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;controllers&#39;</span><span class="p">,</span>
         <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;controller&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Controller</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;controller name&#39;</span><span class="p">],</span>
                     <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
         <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;List of controller(s) name(s)&#39;</span><span class="p">],</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controllers</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">controller</span> <span class="ow">in</span> <span class="n">controllers</span><span class="p">:</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
            <span class="n">ctrl_name</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">pool</span><span class="o">.</span><span class="n">deleteController</span><span class="p">(</span><span class="n">ctrl_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> and subsequent controllers (if any) &quot;</span>\
                      <span class="s2">&quot;could not be deleted&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctrl_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span></div>


<span class="c1">##########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Controller related macros</span>
<span class="c1">#</span>
<span class="c1">##########################################################################</span>


<div class="viewcode-block" id="send2ctrl"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.send2ctrl">[docs]</a><span class="k">class</span> <span class="nc">send2ctrl</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sends the given data directly to the controller&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;controller&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Controller</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Controller name&#39;</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                  <span class="n">ParamRepeat</span><span class="p">([</span><span class="s1">&#39;string item&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
                               <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;a string item&#39;</span><span class="p">],),</span>
                  <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;data to be sent&#39;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">str_data</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">SendToController</span><span class="p">([</span><span class="n">name</span><span class="p">,</span> <span class="n">str_data</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div>

<span class="c1">##########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Library handling related macros</span>
<span class="c1">#</span>
<span class="c1">##########################################################################</span>


<div class="viewcode-block" id="edctrlcls"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.edctrlcls">[docs]</a><span class="k">class</span> <span class="nc">edctrlcls</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the contents of the library file which contains the given</span>
<span class="sd">       controller code.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;ctrlclass&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">ControllerClass</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Controller class name&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="n">result_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;filedata&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">File</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The file data object.&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="n">hints</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;commit_cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;commit_ctrllib&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrlclass</span><span class="p">):</span>
        <span class="n">f_name</span> <span class="o">=</span> <span class="n">ctrlclass</span><span class="o">.</span><span class="n">file</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">ctrlclass</span><span class="o">.</span><span class="n">getPool</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">GetFile</span><span class="p">(</span><span class="n">f_name</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">tostring</span><span class="p">()</span>
        <span class="n">line_nb</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">ctrlclass</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
                    <span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="n">line_nb</span> <span class="o">=</span> <span class="n">line_nb</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">f_name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">line_nb</span><span class="p">]</span></div>


<div class="viewcode-block" id="edctrllib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.edctrllib">[docs]</a><span class="k">class</span> <span class="nc">edctrllib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the contents of the given library file&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">Filename</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Absolute path and file name or &#39;</span>
         <span class="s1">&#39;simple filename. Relative paths are not allowed.&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="n">result_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;filedata&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">File</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The file data object&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="n">hints</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;commit_cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;commit_ctrllib&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getManager</span><span class="p">()</span><span class="o">.</span><span class="n">getPool</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">GetFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">filename</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">tostring</span><span class="p">(),</span> <span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="commit_ctrllib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.commit_ctrllib">[docs]</a><span class="k">class</span> <span class="nc">commit_ctrllib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Puts the contents of the given data in a file inside the pool&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">Filename</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Absolute path and file name&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The user name&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;A description of the changes made to &#39;</span>
         <span class="s1">&#39;the file&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;filedata&#39;</span><span class="p">,</span>  <span class="n">Type</span><span class="o">.</span><span class="n">File</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;The file data object&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">filedata</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getManager</span><span class="p">()</span><span class="o">.</span><span class="n">getPool</span><span class="p">()</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">username</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">comment</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">filedata</span><span class="p">))</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">PutFile</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span></div>

<span class="c1">##########################################################################</span>
<span class="c1">#</span>
<span class="c1"># Macro handling related macros</span>
<span class="c1">#</span>
<span class="c1">##########################################################################</span>


<div class="viewcode-block" id="prdef"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.prdef">[docs]</a><span class="k">class</span> <span class="nc">prdef</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the the macro code for the given macro name.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;macro_name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">MacroCode</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;macro name&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">macro_data</span><span class="p">):</span>
        <span class="n">code_lines</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">macro_data</span><span class="o">.</span><span class="n">code</span>
        <span class="k">for</span> <span class="n">code_line</span> <span class="ow">in</span> <span class="n">code_lines</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">code_line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="relctrllib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.relctrllib">[docs]</a><span class="k">class</span> <span class="nc">relctrllib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reloads the given controller library code from the pool server</span>
<span class="sd">    filesystem.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;ctrl_library&quot;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">ControllerLibrary</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="s2">&quot;Controller library to reload&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_library</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">ctrl_library</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">ReloadControllerLib</span><span class="p">(</span><span class="n">ctrl_library</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="addctrllib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.addctrllib">[docs]</a><span class="k">class</span> <span class="nc">addctrllib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adds the given controller library code to the pool server filesystem.</span>

<span class="sd">    .. note:: Currently this macro does not report eventual errors,</span>
<span class="sd">              for example Python syntax errors, in the controller plugin</span>
<span class="sd">              module. So if it silently exits but the controller library is</span>
<span class="sd">              not correctly loaded please check the server logs for more</span>
<span class="sd">              information.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;ctrl_library_name&quot;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                  <span class="s2">&quot;The module name to be loaded (without extension)&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_library_name</span><span class="p">):</span>
        <span class="c1"># TODO: make it compatible with multiple pools</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPools</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">ReloadControllerLib</span><span class="p">(</span><span class="n">ctrl_library_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="relctrlcls"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.relctrlcls">[docs]</a><span class="k">class</span> <span class="nc">relctrlcls</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reloads the given controller class code from the pool server filesystem.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;ctrl_class&quot;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">ControllerClass</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Controller &quot;</span>
                                                            <span class="s2">&quot;class to reload&quot;</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctrl_class</span><span class="p">):</span>
        <span class="n">pool</span> <span class="o">=</span> <span class="n">ctrl_class</span><span class="o">.</span><span class="n">getPoolObj</span><span class="p">()</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">ReloadControllerClass</span><span class="p">(</span><span class="n">ctrl_class</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="rellib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.rellib">[docs]</a><span class="k">class</span> <span class="nc">rellib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Reloads the given python library code from the macro server filesystem.</span>

<span class="sd">    .. warning:: use with extreme care! Accidentally reloading a system</span>
<span class="sd">                 module or an installed python module may lead to unpredictable</span>
<span class="sd">                 behavior</span>

<span class="sd">    .. warning:: Prior to the Sardana version 1.6.0 this macro was successfully</span>
<span class="sd">                 reloading python libraries located in the MacroPath.</span>
<span class="sd">                 The MacroPath is not a correct place to locate your python</span>
<span class="sd">                 libraries. They may be successfully loaded on the MacroServer</span>
<span class="sd">                 startup, but this can not be guaranteed.</span>
<span class="sd">                 In order to use python libraries within your macro code,</span>
<span class="sd">                 locate them in either of valid system PYTHONPATH or</span>
<span class="sd">                 MacroServer PythonPath property (of the host where</span>
<span class="sd">                 MacroServer runs).</span>
<span class="sd">                 In order to achieve the previous behavior, just configure the</span>
<span class="sd">                 the same directory in both system PYTHONPATH (or MacroServer&#39;s</span>
<span class="sd">                 PythonPath) and MacroPath.</span>

<span class="sd">    .. note:: if python module is used by any macro, don&#39;t forget to reload</span>
<span class="sd">              the corresponding macros afterward so the changes take effect.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;module_name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;The module name to be reloaded (without extension)&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reloadLibrary</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> successfully (re)loaded&quot;</span><span class="p">,</span> <span class="n">module_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">LibraryError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Cannot use rellib to reload a macro library. &quot;</span>
                       <span class="s2">&quot;Use &#39;relmaclib&#39; instead&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>


<div class="viewcode-block" id="relmaclib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.relmaclib">[docs]</a><span class="k">class</span> <span class="nc">relmaclib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reloads the given macro library code from the macro server filesystem.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;macro_library&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">MacroLibrary</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;The module name to be reloaded (without extension)&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">macro_library</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">macro_library</span><span class="o">.</span><span class="n">name</span>
        <span class="n">new_macro_library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reloadMacroLibrary</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">has_errors</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> could not be (re)loaded&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">exc_info</span> <span class="o">=</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">get_error</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="o">*</span><span class="n">exc_info</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The old </span><span class="si">%s</span><span class="s2"> macro library is still available.&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">macros</span> <span class="o">=</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">get_macros</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> successfully (re)loaded (found </span><span class="si">%d</span><span class="s2"> macros)&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">macros</span><span class="p">))</span></div>


<div class="viewcode-block" id="addmaclib"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.addmaclib">[docs]</a><span class="k">class</span> <span class="nc">addmaclib</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads a new macro library.</span>

<span class="sd">    .. warning:: Keep in mind that macros from the new library can override</span>
<span class="sd">                 macros already present in the system.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;macro_library_name&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">String</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
         <span class="s1">&#39;The module name to be loaded (without extension)&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">macro_library_name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMacroLib</span><span class="p">(</span><span class="n">macro_library_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">UnknownMacroLibrary</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">WrongParam</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> macro library is already loaded&#39;</span> <span class="o">%</span>
                             <span class="n">macro_library_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">macro_library_name</span><span class="p">):</span>
        <span class="n">old_macros</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMacroNames</span><span class="p">()</span>
        <span class="n">new_macro_library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reloadMacroLibrary</span><span class="p">(</span><span class="n">macro_library_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">has_errors</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> could not be added&quot;</span><span class="p">,</span> <span class="n">macro_library_name</span><span class="p">)</span>
            <span class="n">exc_info</span> <span class="o">=</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">get_error</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="o">*</span><span class="n">exc_info</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_metamacros</span> <span class="o">=</span> <span class="n">new_macro_library</span><span class="o">.</span><span class="n">get_macros</span><span class="p">()</span>
            <span class="c1"># retrieving the macro names from the metamacros</span>
            <span class="n">new_macros</span> <span class="o">=</span> <span class="p">[</span><span class="n">metamacro</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">metamacro</span> <span class="ow">in</span> <span class="n">new_metamacros</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> successfully loaded (found </span><span class="si">%d</span><span class="s2"> macros)&quot;</span><span class="p">,</span>
                        <span class="n">macro_library_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_macros</span><span class="p">))</span>
            <span class="c1"># intersection between old and new indicates the overridden macros</span>
            <span class="n">overridden_macros</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">old_macros</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">new_macros</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">overridden_macros</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> macro library has overridden the following &#39;</span> <span class="o">+</span>
                       <span class="s1">&#39;macros: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">macro_library_name</span><span class="p">,</span> <span class="n">overridden_macros</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>


<div class="viewcode-block" id="relmac"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.relmac">[docs]</a><span class="k">class</span> <span class="nc">relmac</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reloads the given macro code from the macro server filesystem.</span>
<span class="sd">    Attention: All macros inside the same file will also be reloaded.&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;macro_code&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">MacroCode</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;macro name to be reloaded&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">macro_code</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">macro_code</span><span class="o">.</span><span class="n">name</span>
        <span class="n">macro_library_name</span> <span class="o">=</span> <span class="n">macro_code</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">name</span>
        <span class="n">macro_library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reloadMacro</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">macro_library</span><span class="o">.</span><span class="n">has_errors</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> could not be (re)loaded&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">exc_info</span> <span class="o">=</span> <span class="n">macro_library</span><span class="o">.</span><span class="n">get_error</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="o">*</span><span class="n">exc_info</span><span class="p">[:</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The old </span><span class="si">%s</span><span class="s2"> macro is still available.&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">maclibname</span> <span class="o">=</span> <span class="n">macro_library_name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> macro successfully (re)loaded&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">macros_in_lib</span> <span class="o">=</span> <span class="n">macro_library</span><span class="o">.</span><span class="n">get_macros</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">All macros from macro library </span><span class="si">%s</span><span class="s2"> have &quot;</span> <span class="o">+</span>
                        <span class="s2">&quot;been reloaded:&quot;</span><span class="p">,</span> <span class="n">maclibname</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">([</span><span class="n">macro</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">macro</span> <span class="ow">in</span> <span class="n">macros_in_lib</span><span class="p">])</span></div>


<div class="viewcode-block" id="sar_info"><a class="viewcode-back" href="../../../../devel/api/sardana/macroserver/macros/expert.html#sardana.macroserver.macros.expert.sar_info">[docs]</a><span class="k">class</span> <span class="nc">sar_info</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Prints details about the given sardana object&quot;&quot;&quot;</span>

    <span class="n">param_def</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;obj&#39;</span><span class="p">,</span> <span class="n">Type</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;obj&#39;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dump_properties</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="c1"># self.output(&quot;&quot;)</span>
        <span class="c1"># self.dump_attributes(obj)</span>

    <span class="k">def</span> <span class="nf">dump_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">serialize</span><span class="p">()</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">()],</span> <span class="n">row_head_str</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                      <span class="n">row_head_fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%*s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">col_sep</span><span class="o">=</span><span class="s1">&#39;  =  &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;Properties:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;-----------&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">genOutput</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dump_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dev_attrs</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">dump_attributes</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">row_head</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">dev_attr</span> <span class="ow">in</span> <span class="n">dev_attrs</span><span class="p">:</span>
            <span class="n">row_head</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dev_attr</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dev_attr</span><span class="o">.</span><span class="n">has_failed</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">dev_attr</span><span class="o">.</span><span class="n">get_err_stack</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">err</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">desc</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;Unknown error!&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">dev_attr</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([</span><span class="n">values</span><span class="p">],</span> <span class="n">row_head_str</span><span class="o">=</span><span class="n">row_head</span><span class="p">,</span>
                      <span class="n">row_head_fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%*s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">col_sep</span><span class="o">=</span><span class="s1">&#39;  =  &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;Attributes:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="s2">&quot;-----------&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">genOutput</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.7.3-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>