

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sardana Testing &mdash; sardana 3.0.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="sardana 3.0.2-alpha documentation" href="../../index.html"/>
        <link rel="up" title="Sardana Testing" href="index.html"/>
        <link rel="next" title="Run tests from command line" href="test_run_commands.html"/>
        <link rel="prev" title="Sardana Testing" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Sardana Testing</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">General test documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_run_commands.html">Run Sardana tests from command line</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_example.html">Test-driven development example</a></li>
<li class="toctree-l4"><a class="reference internal" href="tests/index.html">Sardana Unit Test examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/api_sardana.html">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration.html">Migration guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">sardana</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../docs.html">Sardana 3.0 Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">Developer&#8217;s Guide</a> &raquo;</li>
      
          <li><a href="index.html">Sardana Testing</a> &raquo;</li>
      
    <li>Sardana Testing</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/devel/howto_test/test_general.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sardana-testing">
<span id="sardana-test-general-howto"></span><h1>Sardana Testing<a class="headerlink" href="#sardana-testing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sardana-test-framework">
<h2>Sardana Test Framework<a class="headerlink" href="#sardana-test-framework" title="Permalink to this headline">¶</a></h2>
<p>A testing framework allowing to test the Sardana features is included with the
Sardana distribution. It is useful for test-driven development and it allows
to find bugs in the code.</p>
<p>The first implementation of the Framework is an outcome of the <a class="reference external" href="http://sourceforge.net/p/sardana/wiki/SEP5/">Sardana
Enhancement Proposal 5 (SEP5)</a>.</p>
<p>Ideally, whenever possible, bug reports should be accompanied by a test
revealing the bug.</p>
<p>The first tests implemented are focused on Unit Tests, but the same framework
should be used for integration and system tests as well.</p>
<p>The sardana.test module includes testsuite.py. This file provides an
auto-discovering suite for all tests implemented in Sardana.</p>
<p>The following are some key points to keep in mind when using this framework:</p>
<ul class="simple">
<li>The Sardana Test Framework is based on <a class="reference external" href="https://docs.python.org/dev/library/unittest.html#module-unittest" title="(in Python v3.9)"><code class="xref py py-mod docutils literal"><span class="pre">unittest</span></code></a> which should be
imported from <code class="xref py py-mod docutils literal"><span class="pre">taurus.external</span></code> in order to be compatible with all
versions of python supported by Taurus.</li>
<li>all test-related code is contained in submodules named <cite>test</cite> which appear
in any module of Sardana.</li>
<li><dl class="first docutils">
<dt>test-related code falls in one of these three categories:</dt>
<dd><ul class="first last">
<li>Actual test code (classes that derive from unittest.TestCase)</li>
<li>Utility classes/functions (code to simplify development of test code)</li>
<li>Resources (accessory files required by some test). They are located in
subdirectories named <cite>res</cite> situated inside the folders named <cite>test</cite>.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>For a more complete description of the conventions on how to write tests with
the Sardana Testing Framework, please refer to the
[SEP5](<a class="reference external" href="http://sourceforge.net/p/sardana/wiki/SEP5/">http://sourceforge.net/p/sardana/wiki/SEP5/</a>).</p>
</div>
<div class="section" id="sardana-test-framework-for-testing-macros">
<h2>Sardana Test Framework for testing macros<a class="headerlink" href="#sardana-test-framework-for-testing-macros" title="Permalink to this headline">¶</a></h2>
<p>Sardana Test Framework provides tools for testing macros. These tools come
from sardana.macroserver.macros.test module</p>
<p>Tests meant to be incorporated in the Sardana distribution must be portable.
For this reason it is strongly encouraged to use only elements created
by the sar_demo macro. Only in the case where this is not possible, one may
create specific elements for a test; these elements must be removed at the
end of the test execution (e.g. using the tearDown method).</p>
<p>The module <a class="reference internal" href="../api/api_test.html#module-sardana.macroserver.macros.test" title="sardana.macroserver.macros.test"><code class="xref py py-mod docutils literal"><span class="pre">sardana.macroserver.macros.test</span></code></a> provides utilities to simplify
the tests for macro execution and macro stop. Macro test classes can inherit
from <a class="reference internal" href="../api/api_test.html#sardana.macroserver.macros.test.RunMacroTestCase" title="sardana.macroserver.macros.test.RunMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">RunMacroTestCase</span></code></a>,
<a class="reference internal" href="../api/api_test.html#sardana.macroserver.macros.test.RunStopMacroTestCase" title="sardana.macroserver.macros.test.RunStopMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">RunStopMacroTestCase</span></code></a> or
<a class="reference internal" href="../api/api_test.html#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroTestCase</span></code></a>.</p>
<p>Another utility provided is the option to execute the same test with
many different macro input parameters. This is done  by decorating the test
class with any of the decorators of the the macro tests family.</p>
<p>This decorator is provided by <a class="reference internal" href="../api/api_test.html#module-sardana.macroserver.macros.test" title="sardana.macroserver.macros.test"><code class="xref py py-mod docutils literal"><span class="pre">sardana.macroserver.macros.test</span></code></a>.</p>
<p><strong>Specificities:</strong></p>
<ul class="simple">
<li>Macros such as &#8216;lsm&#8217; inherit from RunMacroTestCase as it is interesting to
test if the macros can be executed. Helper methods
( such as <a class="reference internal" href="../api/api_test.html#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs"><code class="xref py py-meth docutils literal"><span class="pre">RunMacroTestCase.macro_runs()</span></code></a> ) can be overriden when
programming new test cases. New helpers can be created as well.</li>
<li>Scan macros inherits from RunStopMacroTestCase as it is interesting to test
both: if the macros can be executed and if they can be aborted.</li>
</ul>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<p>For a more complete description of the conventions used when writing tests, see:
<a class="reference external" href="http://sourceforge.net/p/sardana/wiki/SEP5/">http://sourceforge.net/p/sardana/wiki/SEP5/</a></p>
<p>For more information about unittest framework:
<a class="reference external" href="http://docs.python.org/2/library/unittest.html">http://docs.python.org/2/library/unittest.html</a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="test_run_commands.html" class="btn btn-neutral float-right" title="Run tests from command line" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Sardana Testing" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.0.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>