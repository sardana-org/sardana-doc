

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Controller overview &mdash; sardana 3.1.1-alpha documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Motor overview" href="overview_motor.html" />
    <link rel="prev" title="Pool overview" href="overview_pool.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User’s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Overview</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="overview.html">Global overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_macroserver.html">Macro Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_door.html">Door</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_pool.html">Pool</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_motor.html">Motor</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_pseudomotor.html">Pseudo motor</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_motorgroup.html">MotorGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_IOR.html">IO register</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_triggergate.html">Trigger/gate</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_countertimer.html">Counter/timer</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_0D.html">0D experiment channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_1D.html">1D experiment channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_2D.html">2D experiment channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_pseudocounter.html">Pseudo counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_measurementgroup.html">Measurement Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="overview_instrument.html">Instrument</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_test/index.html">Sardana Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/api_sardana.html">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration/index.html">Migration guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../news.html">What's new?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">sardana</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../docs.html">Sardana 3.1 Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Developer’s Guide</a> &raquo;</li>
        
          <li><a href="index.html">Overview</a> &raquo;</li>
        
      <li>Controller overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/devel/overview/overview_controller.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="controller-overview">
<span id="sardana-controller-overview"></span><h1>Controller overview<a class="headerlink" href="#controller-overview" title="Permalink to this headline">¶</a></h1>
<p>Each different hardware object is directly controlled by a software object
called <em>controller</em>. This object is responsible for mapping the communication
between a set of hardware objects (example motors) and the underlying hardware
(example: a motor controller crate). The <em>controller</em> object is also exposed as
a <a class="reference external" href="http://www.tango-controls.org/">Tango</a> device.</p>
<p>Usually a controller is capable of handling several hardware objects.
For example, a motor controller crate is capable of controlling several motors
(generally called <em>axis</em> <a class="footnote-reference brackets" href="#id2" id="id1">1</a>).</p>
<p>The controller objects can be created/deleted/renamed dynamically in a running
pool.</p>
<p>A specific type of controller needs to be created to handle each specific type
of hardware. Therefore, to each type of hardware controller there must be
associated a specific controller software component. You can write a
specific controller software component (<a class="reference internal" href="../../glossary.html#term-plug-in"><span class="xref std std-term">plug-in</span></a>) that is able to
communicate with the specific hardware. You can this way extend the initial
pool capabilities to talk to all kinds of different hardware.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/sardana_server_np200.png"><img alt="../../_images/sardana_server_np200.png" src="../../_images/sardana_server_np200.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">A diagram representing a sardana server with a controller class
<em>NSC200Controller</em>, an instance of that controller <em>np200ctrl_1</em> “connected”
to a real hardware and a single motor <em>npm_1</em>.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>A sardana controller is responsible for it’s sardana element(s). Example: an
Icepap hardware motor controller can <em>control</em> up to 128 individual motor axis.
In the same way, the coresponding software motor controller <em>IcepapController</em>
will <em>own</em> the individual motor axises.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/sardana_server_icepap.png"><img alt="../../_images/sardana_server_icepap.png" src="../../_images/sardana_server_icepap.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">A diagram representing a sardana server with a controller class
<em>IcepapController</em>, an instance of that controller <em>icectrl_1</em> “connected”
to a real hardware and motors <em>icem_[1..5]</em>.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>These are the different types of controllers recognized by sardana:</p>
<dl>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.MotorController" title="sardana.pool.controller.MotorController"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotorController</span></code></a></dt><dd><p>You should use/write a <a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.MotorController" title="sardana.pool.controller.MotorController"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotorController</span></code></a> sardana <a class="reference internal" href="../../glossary.html#term-plug-in"><span class="xref std std-term">plug-in</span></a> if
the the device you want to control has a <em>moveable</em> interface.
The <a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.MotorController" title="sardana.pool.controller.MotorController"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotorController</span></code></a> actually fullfils a <em>changeable</em> interface.
This means that, for example, a power supply that has a current which you
want to <em>ramp</em> could also be implemented as a <a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.MotorController" title="sardana.pool.controller.MotorController"><code class="xref py py-class docutils literal notranslate"><span class="pre">MotorController</span></code></a>.</p>
<p>Example: the Newport NSC200 motor controller</p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.CounterTimerController" title="sardana.pool.controller.CounterTimerController"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterTimerController</span></code></a></dt><dd><p>This controller type is designed to control a device capable of counting
scalar values (and, optionaly have a timer).</p>
<p>Example: The National Instruments 6602 8-Channel Counter/Timer</p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.ZeroDController" title="sardana.pool.controller.ZeroDController"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZeroDController</span></code></a></dt><dd><p>This controller type is designed to control a device capable of supplying
scalar values. The <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a> provides a way to obtain a value over a
certain acquisition time through different algorithms (average, maximum,
integration).</p>
<p>Example: an electrometer</p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.OneDController" title="sardana.pool.controller.OneDController"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneDController</span></code></a></dt><dd><p>This controller type is designed to control a device capable of supplying
1D values. It has a very similar <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a> to <a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.CounterTimerController" title="sardana.pool.controller.CounterTimerController"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterTimerController</span></code></a></p>
<p>Example: an <a class="reference internal" href="../../glossary.html#term-MCA"><span class="xref std std-term">MCA</span></a></p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.TwoDController" title="sardana.pool.controller.TwoDController"><code class="xref py py-class docutils literal notranslate"><span class="pre">TwoDController</span></code></a></dt><dd><p>This controller type is designed to control a device capable of supplying
2D values. It has a very similar <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a> to <a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.CounterTimerController" title="sardana.pool.controller.CounterTimerController"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterTimerController</span></code></a></p>
<p>Example: a <a class="reference internal" href="../../glossary.html#term-CCD"><span class="xref std std-term">CCD</span></a></p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.PseudoMotorController" title="sardana.pool.controller.PseudoMotorController"><code class="xref py py-class docutils literal notranslate"><span class="pre">PseudoMotorController</span></code></a></dt><dd><p>A controller designed to export <em>virtual motors</em> that represent a new view
over the actual physical motors.</p>
<p>Example: A slit pseudo motor controller provides <em>gap</em> and <em>offset</em> virtual
motors over the physical blades</p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.PseudoCounterController" title="sardana.pool.controller.PseudoCounterController"><code class="xref py py-class docutils literal notranslate"><span class="pre">PseudoCounterController</span></code></a></dt><dd><p>A controller designed to export <em>virtual counters</em> that represent a new view
over the actual physical counters/0Ds.</p>
</dd>
<dt><a class="reference internal" href="../api/sardana/pool/controller.html#sardana.pool.controller.IORegisterController" title="sardana.pool.controller.IORegisterController"><code class="xref py py-class docutils literal notranslate"><span class="pre">IORegisterController</span></code></a></dt><dd><p>A controller designed to control hardware registers.</p>
</dd>
</dl>
<p>Controller plug-ins can be written in <a class="reference external" href="http://www.python.org/">Python</a> (and in the future in C++).
Each controller code is basically a <a class="reference external" href="http://www.python.org/">Python</a> class that needs to obey a
specific <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a>.</p>
<p>Here is an a extract of the pertinent part of a <a class="reference external" href="http://www.python.org/">Python</a> motor controller code
that is able to talk to a Newport motor controller:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sardana.pool.controller</span> <span class="k">import</span> <span class="n">MotorController</span><span class="p">,</span> \
    <span class="n">Type</span><span class="p">,</span> <span class="n">Description</span><span class="p">,</span> <span class="n">DefaultValue</span>

<span class="k">class</span> <span class="nc">NSC200Controller</span><span class="p">(</span><span class="n">MotorController</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is the Tango Sardana motor controller for the Newport NewStep</span>
<span class="sd">    handheld motion controller NSC200.</span>
<span class="sd">    This controller communicates through a Device Pool serial communication</span>
<span class="sd">    channel.&quot;&quot;&quot;</span>

    <span class="n">ctrl_properties</span> <span class="o">=</span> \
        <span class="p">{</span> <span class="s1">&#39;SerialCh&#39;</span> <span class="p">:</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">Description</span> <span class="p">:</span> <span class="s1">&#39;Communication channel name for the serial line&#39;</span> <span class="p">},</span>
          <span class="s1">&#39;SwitchBox&#39;</span><span class="p">:</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                         <span class="n">Description</span> <span class="p">:</span> <span class="s1">&#39;Using SwitchBox&#39;</span><span class="p">,</span>
                         <span class="n">DefaultValue</span> <span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
          <span class="s1">&#39;ControllerNumber&#39;</span> <span class="p">:</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                 <span class="n">Description</span> <span class="p">:</span> <span class="s1">&#39;Controller number&#39;</span><span class="p">,</span>
                                 <span class="n">DefaultValue</span> <span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inst</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MotorController</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inst</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">serial</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serial_state_event_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">MaxDevice</span> <span class="o">=</span> <span class="mi">8</span>

    <span class="k">def</span> <span class="nf">AddDevice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Without using a Switchbox only axis 1 is allowed&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MX&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">DeleteDevice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="n">_STATE_MAP</span> <span class="o">=</span> <span class="p">{</span> <span class="n">NSC200</span><span class="o">.</span><span class="n">MOTOR_OFF</span> <span class="p">:</span> <span class="n">State</span><span class="o">.</span><span class="n">Off</span><span class="p">,</span> <span class="n">NSC200</span><span class="o">.</span><span class="n">MOTOR_ON</span> <span class="p">:</span> <span class="n">State</span><span class="o">.</span><span class="n">On</span><span class="p">,</span>
                   <span class="n">NSC200</span><span class="o">.</span><span class="n">MOTOR_MOVING</span> <span class="p">:</span> <span class="n">State</span><span class="o">.</span><span class="n">Moving</span> <span class="p">}</span>

    <span class="k">def</span> <span class="nf">StateOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MX&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>

        <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queryCommand</span><span class="p">(</span><span class="s2">&quot;TS&quot;</span><span class="p">))</span>
        <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_STATE_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span><span class="p">)</span>
        <span class="n">register</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queryCommand</span><span class="p">(</span><span class="s2">&quot;PH&quot;</span><span class="p">))</span>
        <span class="n">lower</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">NSC200</span><span class="o">.</span><span class="n">getLimitNegative</span><span class="p">(</span><span class="n">register</span><span class="p">))</span>
        <span class="n">upper</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">NSC200</span><span class="o">.</span><span class="n">getLimitPositive</span><span class="p">(</span><span class="n">register</span><span class="p">))</span>

        <span class="n">switchstate</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">upper</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">switchstate</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="k">elif</span> <span class="n">lower</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">switchstate</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">elif</span> <span class="n">upper</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">switchstate</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">,</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="n">switchstate</span>

    <span class="k">def</span> <span class="nf">ReadOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MX&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queryCommand</span><span class="p">(</span><span class="s2">&quot;TP&quot;</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error reading position, axis not available&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">PreStartOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">StartOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MX&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queryCommand</span><span class="p">(</span><span class="s2">&quot;TS&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">NSC200</span><span class="o">.</span><span class="n">MOTOR_OFF</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MO&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;PA&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;[DONE] sending position&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">StartAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">AbortOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SwitchBox</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;MX&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setCommand</span><span class="p">(</span><span class="s2">&quot;ST&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../howto_controllers/index.html#sardana-controller-howto"><span class="std std-ref">Writing controllers</span></a></dt><dd><p>How to write controller <a class="reference internal" href="../../glossary.html#term-plug-in"><span class="xref std std-term">plug-in</span></a>s in sardana</p>
</dd>
<dt><a class="reference internal" href="../api/api_controller.html#sardana-controller-api"><span class="std std-ref">Controller API reference</span></a></dt><dd><p>the controller <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a></p>
</dd>
<dt><a class="reference internal" href="../api/sardana/tango/pool/Controller.html#sardana.tango.pool.Controller.Controller" title="sardana.tango.pool.Controller.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a></dt><dd><p>the controller tango device <a class="reference internal" href="../../glossary.html#term-API"><span class="xref std std-term">API</span></a></p>
</dd>
</dl>
</div>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>The term <em>axis</em> will be used from here on to refer to the ID of
a specific hardware object (like a motor) with respect to its <em>controller</em>.</p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="overview_motor.html" class="btn btn-neutral float-right" title="Motor overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="overview_pool.html" class="btn btn-neutral float-left" title="Pool overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>