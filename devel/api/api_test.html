

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sardana test API &mdash; sardana 3.0.4-alpha documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sardana migration guide" href="../guide_migration/index.html" />
    <link rel="prev" title="sardanavalue" href="sardana/sardanavalue.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User’s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_test/index.html">Sardana Testing</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="api_sardana.html">API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="api_macro.html">Macro API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_controller.html">Controller API</a></li>
<li class="toctree-l4"><a class="reference internal" href="sardana/taurus/core/tango/sardana.html">Sardana-Taurus model API</a></li>
<li class="toctree-l4"><a class="reference internal" href="sardana/taurus/qt/qtcore/tango/sardana.html">Sardana-Taurus Qt model API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_motor.html">Motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_IOR.html">I/O register</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_countertimer.html">Counter/timer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_0D.html">0D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_1D.html">1D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_2D.html">2D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_triggergate.html">Trigger/gate API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pseudomotor.html">Pseudo motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pseudocounter.html">Pseudo counter API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_measurementgroup.html">Measurement group API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_macroserver.html">MacroServer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pool.html">Pool API</a></li>
<li class="toctree-l4"><a class="reference internal" href="sardana/sardana.html">Library</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Test API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration/index.html">Migration guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">sardana</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../docs.html">Sardana 3.0 Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Developer’s Guide</a> &raquo;</li>
        
          <li><a href="api_sardana.html">Sardana API</a> &raquo;</li>
        
      <li>Sardana test API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/devel/api/api_test.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sardana-test-api">
<span id="id1"></span><h1>Sardana test API<a class="headerlink" href="#sardana-test-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-sardana.macroserver.macros.test">
<span id="macro-test-api"></span><h2>Macro test API<a class="headerlink" href="#module-sardana.macroserver.macros.test" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Classes</p>
<table class="hlist"><tr><td><ul class="simple">
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="sardana.macroserver.macros.test.BaseMacroExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroExecutor</span></code></a></p></li>
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.MacroExecutorFactory" title="sardana.macroserver.macros.test.MacroExecutorFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">MacroExecutorFactory</span></code></a></p></li>
</ul>
</td><td><ul class="simple">
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroTestCase</span></code></a></p></li>
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="sardana.macroserver.macros.test.RunMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunMacroTestCase</span></code></a></p></li>
</ul>
</td><td><ul class="simple">
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.RunStopMacroTestCase" title="sardana.macroserver.macros.test.RunStopMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunStopMacroTestCase</span></code></a></p></li>
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.SarDemoEnv" title="sardana.macroserver.macros.test.SarDemoEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">SarDemoEnv</span></code></a></p></li>
</ul>
</td></tr></table>
</div>
<div class="section" id="decorator">
<h2>Decorator<a class="headerlink" href="#decorator" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="sardana.macroserver.macros.test.macroTest">
<code class="sig-prename descclassname">&#64;</code><code class="sig-name descname">macroTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">klass</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">helper_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_method_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_method_doc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">helper_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#macroTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.macroTest" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator is an specialization of <code class="xref py py-obj docutils literal notranslate"><span class="pre">taurus.test.insertTest</span></code>
for macro testing. It inserts test methods from a helper method that may
accept arguments.</p>
<p>macroTest provides a very economic API for creating new tests for a given
macro based on a helper method.</p>
<p>macroTest accepts the following arguments:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>helper_name (str): the name of the helper method. macroTest will</dt><dd><p>insert a test method which calls the helper with
any  the helper_kwargs (see below).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>test_method_name (str): Optional. Name of the test method to be used.</dt><dd><p>If None given, one will be generated from the
macro and helper names.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>test_method_doc (str): The docstring for the inserted test method</dt><dd><p>(this shows in the unit test output). If None
given, a default one is generated which
includes the input parameters and the helper
name.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>**helper_kwargs: All remaining keyword arguments are passed to the</dt><dd><p>helper.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="#sardana.macroserver.macros.test.macroTest" title="sardana.macroserver.macros.test.macroTest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">macroTest</span></code></a> can work with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">macro_name</span></code> class member</p>
<p>This decorator can be considered a “base” decorator. It is often used to
create other decorators in which the helper method is pre-set. Some
of them are already provided in this module:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">testRun()</span></code> is equivalent to macroTest with helper_name=’macro_runs’</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">testStop()</span></code> is equivalent to macroTest with helper_name=’macro_stops’</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">testFail()</span></code> is equivalent to macroTest with helper_name=’macro_fails’</p></li>
</ul>
<p>The advantage of using the decorators compared to writing the test methods
directly is that the helper method can get keyword arguments and therefore
avoid duplication of code for very similar tests (think, e.g. on writing
similar tests for various sets of macro input parameters):</p>
<p>Consider the following code written using the
<a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunMacroTestCase.macro_runs()</span></code></a> helper:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">)</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="n">twice</span>

    <span class="k">def</span> <span class="nf">test_foo_runs_with_input_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;test that twice(2) runs&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_runs</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_foo_runs_with_input_minus_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;test that twice(2) runs&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_runs</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The equivalent code could be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@macroTest</span><span class="p">(</span><span class="n">helper_name</span><span class="o">=</span><span class="s1">&#39;macro_runs&#39;</span><span class="p">,</span> <span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>
<span class="nd">@macroTest</span><span class="p">(</span><span class="n">helper_name</span><span class="o">=</span><span class="s1">&#39;macro_runs&#39;</span><span class="p">,</span> <span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="s1">&#39;twice&#39;</span>
</pre></div>
</div>
<p>Or, even better, using the specialized testRun decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@testRun</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>
<span class="nd">@testRun</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="s1">&#39;twice&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">taurus.test.insertTest</span></code></p>
</div>
</dd></dl>

</div>
<div class="section" id="basemacroexecutor">
<h2>BaseMacroExecutor<a class="headerlink" href="#basemacroexecutor" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-8f2852cef37fecc7df42e72bb0ecfbaf8bc17691.png" alt="Inheritance diagram of BaseMacroExecutor" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor">
<em class="property">class </em><code class="sig-name descname">BaseMacroExecutor</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract MacroExecutor class. Inherit from it if you want to create your
own macro executor.</p>
<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.log_levels">
<code class="sig-name descname">log_levels</code><em class="property"> = ['debug', 'output', 'info', 'warning', 'critical', 'error']</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.log_levels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sync</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute macro.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (string) name of macro to be executed</p></li>
<li><p><strong>macro_params</strong> – (list&lt;string&gt;) macro parameters
(default is macro_params=None for macros without
parameters or with the default values)</p></li>
<li><p><strong>sync</strong> – (bool) whether synchronous or asynchronous call
(default is sync=True)</p></li>
<li><p><strong>timeout</strong> – <dl class="simple">
<dt>(float) timeout (in s) that will be passed to the wait</dt><dd><p>method, in case of synchronous execution; None means
wait infinitely</p>
</dd>
</dl>
<p>In asyncrhonous execution method <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor.wait" title="sardana.macroserver.macros.test.BaseMacroExecutor.wait"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait()</span></code></a> has to be explicitly
called.</p>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until macro is done. Use it in asynchronous executions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – (float) waiting timeout (in s); None means wait
infinitely</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">started_event_timeout</span><span class="o">=</span><span class="default_value">3.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop macro execution. Execute macro in synchronous way before using
this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>started_event_timeout</strong> – (float) waiting timeout for started event</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerLog">
<code class="sig-name descname">registerLog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_level</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Start registering log messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_level</strong> – (str) string indicating the log level</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterLog">
<code class="sig-name descname">unregisterLog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_level</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop registering log messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_level</strong> – (str) string indicating the log level</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getLog">
<code class="sig-name descname">getLog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">log_level</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Get log messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>log_level</strong> – (str) string indicating the log level</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(seq&lt;str&gt;) list of strings with log messages</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerAll">
<code class="sig-name descname">registerAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Register for macro result, all log levels and common buffer.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterAll">
<code class="sig-name descname">unregisterAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister macro result, all log levels and common buffer.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerResult">
<code class="sig-name descname">registerResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Register for macro result</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterResult">
<code class="sig-name descname">unregisterResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister macro result.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getResult">
<code class="sig-name descname">getResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro result.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(seq&lt;str&gt;) list of strings with Result messages</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer">
<code class="sig-name descname">createCommonBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.createCommonBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a common buffer, where all the registered logs will be stored.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getCommonBuffer">
<code class="sig-name descname">getCommonBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getCommonBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getCommonBuffer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Get common buffer.</dt><dd><p>Method getCommonBuffer can only be used if at least one buffer exists.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>(seq&lt;str&gt;) list of strings with messages from all log levels</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer" title="sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createCommonBuffer()</span></code></a></p>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getState">
<code class="sig-name descname">getState</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getState" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro execution state.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getStateBuffer">
<code class="sig-name descname">getStateBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getStateBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getStateBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get buffer (history) of macro execution states.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(seq&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getExceptionStr">
<code class="sig-name descname">getExceptionStr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getExceptionStr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getExceptionStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro exception type representation (None if the macro state
is not exception).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(str)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="macroexecutorfactory">
<h2>MacroExecutorFactory<a class="headerlink" href="#macroexecutorfactory" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-31f17290a675f49bc1d1413dc6eb35338b834dda.png" alt="Inheritance diagram of MacroExecutorFactory" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory">
<em class="property">class </em><code class="sig-name descname">MacroExecutorFactory</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">p</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#MacroExecutorFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>A scheme-agnostic factory for MacroExecutor instances</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span>  <span class="n">MacroExecutorFactory</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">getMacroExecutor</span><span class="p">(</span><span class="s1">&#39;tango://my/door/name&#39;</span><span class="p">)</span> <span class="c1">#returns a TangoMacroExecutor</span>
</pre></div>
</div>
<p>Note: For the moment, only TangoMacroExecutor is supported</p>
<dl class="py method">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory.getMacroExecutor">
<code class="sig-name descname">getMacroExecutor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">door_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#MacroExecutorFactory.getMacroExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory.getMacroExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a macro executor instance (a subclass of
<a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="sardana.macroserver.macros.test.BaseMacroExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroExecutor</span></code></a>) depending on the door being used.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory.init">
<code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">p</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="basemacrotestcase">
<h2>BaseMacroTestCase<a class="headerlink" href="#basemacrotestcase" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-5c8b0dc70f5f5367230d5bd4859befb309f59b95.png" alt="Inheritance diagram of BaseMacroTestCase" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase">
<em class="property">class </em><code class="sig-name descname">BaseMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract class for macro testing.
BaseMacroTestCase will provide a <code class="xref py py-obj docutils literal notranslate"><span class="pre">macro_executor</span></code> member which is an
instance of BaseMacroExecutor and which can be used to run a macro.</p>
<p>To use it, simply inherit from BaseMacroTestCase <em>and</em> unittest.TestCase
and provide the following class members:</p>
<blockquote>
<div><ul class="simple">
<li><p>macro_name (string) name of the macro to be tested</p></li>
<li><dl class="simple">
<dt>door_name (string) name of the door where the macro will be executed.</dt><dd><p>This is optional. If not set,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">sardanacustomsettings.UNITTEST_DOOR_NAME</span></code> is used</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Then you may define test methods.</p>
<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.macro_name">
<code class="sig-name descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.door_name">
<code class="sig-name descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>A macro_executor instance must be created</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.tearDown">
<code class="sig-name descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase.tearDown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="runmacrotestcase">
<h2>RunMacroTestCase<a class="headerlink" href="#runmacrotestcase" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-c773f7a42101795caf90ea0ae8ec41348698b227.png" alt="Inheritance diagram of RunMacroTestCase" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase">
<em class="property">class </em><code class="sig-name descname">RunMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for testing execution of arbitrary Sardana macros.
See <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroTestCase</span></code></a> for requirements.</p>
<dl class="simple">
<dt>It provides the following helper methods:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">macro_runs()</span></code></a></p></li>
<li><p><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_fails" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_fails"><code class="xref py py-meth docutils literal notranslate"><span class="pre">macro_fails()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.assertFinished">
<code class="sig-name descname">assertFinished</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.assertFinished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.assertFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro has finished.</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconditions:
- Those from <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroTestCase</span></code></a>
- the macro executor registers to all the log levels</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs">
<code class="sig-name descname">macro_runs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait_timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.macro_runs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully executed for the given input parameters. It may also
optionally perform checks on the outputs from the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (str) macro name (takes precedence over macro_name
class member)</p></li>
<li><p><strong>macro_params</strong> – (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</p></li>
<li><p><strong>wait_timeout</strong> – (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout is
used (None).</p></li>
<li><p><strong>data</strong> – (obj) Optional. If passed, the macro data after the
execution is tested to be equal to this.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_fails">
<code class="sig-name descname">macro_fails</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait_timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exception</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.macro_fails"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_fails" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the macro fails to run for the given input parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (str) macro name (takes precedence over macro_name
class member)</p></li>
<li><p><strong>macro_params</strong> – (seq&lt;str&gt;) input parameters for the macro</p></li>
<li><p><strong>wait_timeout</strong> – maximum allowed time for the macro to fail. By
default infinite timeout (None) is used.</p></li>
<li><p><strong>exception</strong> – (str or Exception) if given, an additional check of
the type of the exception is done.
(IMPORTANT: this is just a comparison of str
representations of exception objects)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_name">
<code class="sig-name descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.door_name">
<code class="sig-name descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.tearDown">
<code class="sig-name descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="runstopmacrotestcase">
<h2>RunStopMacroTestCase<a class="headerlink" href="#runstopmacrotestcase" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-9825a8b112d5ff4c6392dc53471c808e2619c76b.png" alt="Inheritance diagram of RunStopMacroTestCase" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase">
<em class="property">class </em><code class="sig-name descname">RunStopMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an extension of <a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="sardana.macroserver.macros.test.RunMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunMacroTestCase</span></code></a> to include helpers for
testing the abort process of a macro. Useful for Runnable and Stopable
macros.</p>
<p>It provides the <a class="reference internal" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops" title="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops"><code class="xref py py-meth docutils literal notranslate"><span class="pre">macro_stops()</span></code></a> helper</p>
<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.assertStopped">
<code class="sig-name descname">assertStopped</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase.assertStopped"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.assertStopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro was stopped</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops">
<code class="sig-name descname">macro_stops</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stop_delay</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">wait_timeout</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase.macro_stops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully stoped (a.k.a. aborted) after it has been launched.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (str) macro name (takes precedence over macro_name
class member)</p></li>
<li><p><strong>macro_params</strong> – (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</p></li>
<li><p><strong>stop_delay</strong> – (float) Time (in s) to wait between launching the
macro and sending the stop command. default=0.1</p></li>
<li><p><strong>wait_timeout</strong> – (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout (None) is
used.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_runs">
<code class="sig-name descname">macro_runs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait_timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully executed for the given input parameters. It may also
optionally perform checks on the outputs from the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (str) macro name (takes precedence over macro_name
class member)</p></li>
<li><p><strong>macro_params</strong> – (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</p></li>
<li><p><strong>wait_timeout</strong> – (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout is
used (None).</p></li>
<li><p><strong>data</strong> – (obj) Optional. If passed, the macro data after the
execution is tested to be equal to this.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_name">
<code class="sig-name descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.assertFinished">
<code class="sig-name descname">assertFinished</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.assertFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro has finished.</p>
</dd></dl>

<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.door_name">
<code class="sig-name descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.tearDown">
<code class="sig-name descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_fails">
<code class="sig-name descname">macro_fails</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">macro_params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wait_timeout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exception</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_fails" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the macro fails to run for the given input parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> – (str) macro name (takes precedence over macro_name
class member)</p></li>
<li><p><strong>macro_params</strong> – (seq&lt;str&gt;) input parameters for the macro</p></li>
<li><p><strong>wait_timeout</strong> – maximum allowed time for the macro to fail. By
default infinite timeout (None) is used.</p></li>
<li><p><strong>exception</strong> – (str or Exception) if given, an additional check of
the type of the exception is done.
(IMPORTANT: this is just a comparison of str
representations of exception objects)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.setUp">
<code class="sig-name descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconditions:
- Those from <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseMacroTestCase</span></code></a>
- the macro executor registers to all the log levels</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sardemoenv">
<h2>SarDemoEnv<a class="headerlink" href="#sardemoenv" title="Permalink to this headline">¶</a></h2>
<div class="graphviz"><img src="../../_images/inheritance-1becf53a24027b6df9df7925bc5fca245d13946e.png" alt="Inheritance diagram of SarDemoEnv" class="inheritance graphviz" /></div>
<dl class="py class">
<dt id="sardana.macroserver.macros.test.SarDemoEnv">
<em class="property">class </em><code class="sig-name descname">SarDemoEnv</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">p</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">k</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to get _SAR_DEMO environment variable with cross checking with
the MacroServer (given by <code class="xref py py-attr docutils literal notranslate"><span class="pre">UNITTEST_DOOR_NAME</span></code>)</p>
<dl class="py attribute">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.ready">
<code class="sig-name descname">ready</code><em class="property"> = False</em><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.ready" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.init">
<code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">door_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getElements">
<code class="sig-name descname">getElements</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">elem_type</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getElements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getElements" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of sardemo element(s) of given elem type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>elem_type</strong> – (str) type of elemnts to return (all by default)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getMoveables">
<code class="sig-name descname">getMoveables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getMoveables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getMoveables" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of moveable(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getControllers">
<code class="sig-name descname">getControllers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getControllers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getControllers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of controllers(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getCTs">
<code class="sig-name descname">getCTs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getCTs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getCTs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of counter timer exp channel(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getMotors">
<code class="sig-name descname">getMotors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getMotors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getMotors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of motor(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getPseudoMotors">
<code class="sig-name descname">getPseudoMotors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getPseudoMotors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getPseudoMotors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of pseudomotor(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getZerods">
<code class="sig-name descname">getZerods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getZerods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getZerods" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of zerod exp channel(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getOneds">
<code class="sig-name descname">getOneds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getOneds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getOneds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of one exp channel(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getTwods">
<code class="sig-name descname">getTwods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getTwods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getTwods" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of two exp channel(s) defined by SarDemo</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(list&lt;str&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.changeDoor">
<code class="sig-name descname">changeDoor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">door_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.changeDoor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.changeDoor" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the door name and reset all lists</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../guide_migration/index.html" class="btn btn-neutral float-right" title="Sardana migration guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sardana/sardanavalue.html" class="btn btn-neutral float-left" title="sardanavalue" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>