

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sardana test API &mdash; sardana 3.0.2-alpha documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="sardana 3.0.2-alpha documentation" href="../../index.html"/>
        <link rel="up" title="Sardana API" href="api_sardana.html"/>
        <link rel="next" title="Sardana migration guide" href="../guide_migration.html"/>
        <link rel="prev" title="sardanavalue" href="sardana/sardanavalue.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../users/index.html">User&#8217;s Guide</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_macros/index.html">Writing macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_controllers/index.html">Writing controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_recorders.html">Writing recorders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto_test/index.html">Sardana Testing</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="api_sardana.html">API</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="api_macro.html">Macro API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_controller.html">Controller API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_motor.html">Motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_IOR.html">I/O register</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_countertimer.html">Counter/timer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_0D.html">0D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_1D.html">1D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_2D.html">2D experiment channel API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_triggergate.html">Trigger/gate API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pseudomotor.html">Pseudo motor API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pseudocounter.html">Pseudo counter API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_measurementgroup.html">Measurement group API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_macroserver.html">MacroServer API</a></li>
<li class="toctree-l4"><a class="reference internal" href="api_pool.html">Pool API</a></li>
<li class="toctree-l4"><a class="reference internal" href="sardana/sardana.html">Library</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Test API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide_migration.html">Migration guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide_coding.html">Development guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">sardana</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../docs.html">Sardana 3.0 Documentation</a> &raquo;</li>
      
          <li><a href="../index.html">Developer&#8217;s Guide</a> &raquo;</li>
      
          <li><a href="api_sardana.html">Sardana API</a> &raquo;</li>
      
    <li>Sardana test API</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/devel/api/api_test.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sardana-test-api">
<span id="id1"></span><h1>Sardana test API<a class="headerlink" href="#sardana-test-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-sardana.macroserver.macros.test">
<span id="macro-test-api"></span><h2>Macro test API<a class="headerlink" href="#module-sardana.macroserver.macros.test" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Classes</p>
<table class="hlist"><tr><td><ul class="simple">
<li><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="sardana.macroserver.macros.test.BaseMacroExecutor"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroExecutor</span></code></a></li>
<li><a class="reference internal" href="#sardana.macroserver.macros.test.MacroExecutorFactory" title="sardana.macroserver.macros.test.MacroExecutorFactory"><code class="xref py py-class docutils literal"><span class="pre">MacroExecutorFactory</span></code></a></li>
</ul>
</td><td><ul class="simple">
<li><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroTestCase</span></code></a></li>
<li><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="sardana.macroserver.macros.test.RunMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">RunMacroTestCase</span></code></a></li>
</ul>
</td><td><ul class="simple">
<li><a class="reference internal" href="#sardana.macroserver.macros.test.RunStopMacroTestCase" title="sardana.macroserver.macros.test.RunStopMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">RunStopMacroTestCase</span></code></a></li>
<li><a class="reference internal" href="#sardana.macroserver.macros.test.SarDemoEnv" title="sardana.macroserver.macros.test.SarDemoEnv"><code class="xref py py-class docutils literal"><span class="pre">SarDemoEnv</span></code></a></li>
</ul>
</td></tr></table>
</div>
<div class="section" id="decorator">
<h2>Decorator<a class="headerlink" href="#decorator" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="sardana.macroserver.macros.test.macroTest">
<code class="descclassname">&#64;</code><code class="descname">macroTest</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#macroTest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.macroTest" title="Permalink to this definition">¶</a></dt>
<dd><dl class="function">
<dt>
<code class="descname">macroTest</code><span class="sig-paren">(</span><em>klass=None</em>, <em>helper_name=None</em>, <em>test_method_name=None</em>, <em>test_method_doc=None</em>, <em>**helper_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#macroTest"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This decorator is an specialization of :function::<cite>taurus.test.insertTest</cite>
for macro testing. It inserts test methods from a helper method that may
accept arguments.</p>
<p>macroTest provides a very economic API for creating new tests for a given
macro based on a helper method.</p>
<p>macroTest accepts the following arguments:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>helper_name (str): the name of the helper method. macroTest will</dt>
<dd>insert a test method which calls the helper with
any  the helper_kwargs (see below).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>test_method_name (str): Optional. Name of the test method to be used.</dt>
<dd>If None given, one will be generated from the
macro and helper names.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>test_method_doc (str): The docstring for the inserted test method</dt>
<dd>(this shows in the unit test output). If None
given, a default one is generated which
includes the input parameters and the helper
name.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>**helper_kwargs: All remaining keyword arguments are passed to the</dt>
<dd>helper.</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p><cite>macroTest</cite> can work with the <cite>macro_name</cite> class member</p>
<p>This decorator can be considered a &#8220;base&#8221; decorator. It is often used to
create other decorators in which the helper method is pre-set. Some
of them are already provided in this module:</p>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">testRun()</span></code> is equivalent to macroTest with helper_name=&#8217;macro_runs&#8217;</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">testStop()</span></code> is equivalent to macroTest with helper_name=&#8217;macro_stops&#8217;</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">testFail()</span></code> is equivalent to macroTest with helper_name=&#8217;macro_fails&#8217;</li>
</ul>
<p>The advantage of using the decorators compared to writing the test methods
directly is that the helper method can get keyword arguments and therefore
avoid duplication of code for very similar tests (think, e.g. on writing
similar tests for various sets of macro input parameters):</p>
<p>Consider the following code written using the
<a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs"><code class="xref py py-meth docutils literal"><span class="pre">RunMacroTestCase.macro_runs()</span></code></a> helper:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">)</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="n">twice</span>

    <span class="k">def</span> <span class="nf">test_foo_runs_with_input_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;test that twice(2) runs&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_runs</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">test_foo_runs_with_input_minus_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;test that twice(2) runs&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_runs</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The equivalent code could be written as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@macroTest</span><span class="p">(</span><span class="n">helper_name</span><span class="o">=</span><span class="s1">&#39;macro_runs&#39;</span><span class="p">,</span> <span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>
<span class="nd">@macroTest</span><span class="p">(</span><span class="n">helper_name</span><span class="o">=</span><span class="s1">&#39;macro_runs&#39;</span><span class="p">,</span> <span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="s1">&#39;twice&#39;</span>
</pre></div>
</div>
<p>Or, even better, using the specialized testRun decorator:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@testRun</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">])</span>
<span class="nd">@testRun</span><span class="p">(</span><span class="n">macro_params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">FooTest</span><span class="p">(</span><span class="n">RunMacroTestCase</span><span class="p">,</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">macro_name</span> <span class="o">=</span> <span class="s1">&#39;twice&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">:function::<cite>taurus.test.insertTest</cite></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="basemacroexecutor">
<h2>BaseMacroExecutor<a class="headerlink" href="#basemacroexecutor" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-5a21b7947de56d38741c7bf4ef93bc64e1671848.png" alt="Inheritance diagram of BaseMacroExecutor" usemap="#inheritance95232d70a7" class="inheritance"/>
<map id="inheritance95232d70a7" name="inheritance95232d70a7">
<area shape="rect" id="node1" title="Abstract MacroExecutor class. Inherit from it if you want to create your" alt="" coords="5,5,155,44"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor">
<em class="property">class </em><code class="descname">BaseMacroExecutor</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract MacroExecutor class. Inherit from it if you want to create your
own macro executor.</p>
<dl class="attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.log_levels">
<code class="descname">log_levels</code><em class="property"> = ['debug', 'output', 'info', 'warning', 'critical', 'error']</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.log_levels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>macro_name</em>, <em>macro_params=None</em>, <em>sync=True</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute macro.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (string) name of macro to be executed</li>
<li><strong>macro_params</strong> &#8211; (list&lt;string&gt;) macro parameters
(default is macro_params=None for macros without
parameters or with the default values)</li>
<li><strong>sync</strong> &#8211; (bool) whether synchronous or asynchronous call
(default is sync=True)</li>
<li><strong>timeout</strong> &#8211; <dl class="docutils">
<dt>(float) timeout (in s) that will be passed to the wait</dt>
<dd>method, in case of synchronous execution; None means
wait infinitely</dd>
</dl>
<p>In asyncrhonous execution method <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor.wait" title="sardana.macroserver.macros.test.BaseMacroExecutor.wait"><code class="xref py py-meth docutils literal"><span class="pre">wait()</span></code></a> has to be explicitly
called.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until macro is done. Use it in asynchronous executions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; (float) waiting timeout (in s); None means wait
infinitely</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><em>started_event_timeout=3.0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop macro execution. Execute macro in synchronous way before using
this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>started_event_timeout</strong> &#8211; (float) waiting timeout for started event</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerLog">
<code class="descname">registerLog</code><span class="sig-paren">(</span><em>log_level</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Start registering log messages.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>log_level</strong> &#8211; (str) string indicating the log level</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterLog">
<code class="descname">unregisterLog</code><span class="sig-paren">(</span><em>log_level</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop registering log messages.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>log_level</strong> &#8211; (str) string indicating the log level</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getLog">
<code class="descname">getLog</code><span class="sig-paren">(</span><em>log_level</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getLog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getLog" title="Permalink to this definition">¶</a></dt>
<dd><p>Get log messages.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>log_level</strong> &#8211; (str) string indicating the log level</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(seq&lt;str&gt;) list of strings with log messages</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerAll">
<code class="descname">registerAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Register for macro result, all log levels and common buffer.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterAll">
<code class="descname">unregisterAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister macro result, all log levels and common buffer.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.registerResult">
<code class="descname">registerResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.registerResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.registerResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Register for macro result</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.unregisterResult">
<code class="descname">unregisterResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.unregisterResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.unregisterResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister macro result.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getResult">
<code class="descname">getResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getResult"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro result.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(seq&lt;str&gt;) list of strings with Result messages</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer">
<code class="descname">createCommonBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.createCommonBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a common buffer, where all the registered logs will be stored.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getCommonBuffer">
<code class="descname">getCommonBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getCommonBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getCommonBuffer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Get common buffer.</dt>
<dd>Method getCommonBuffer can only be used if at least one buffer exists.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(seq&lt;str&gt;) list of strings with messages from all log levels<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer" title="sardana.macroserver.macros.test.BaseMacroExecutor.createCommonBuffer"><code class="xref py py-meth docutils literal"><span class="pre">createCommonBuffer()</span></code></a></p>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getState">
<code class="descname">getState</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getState" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro execution state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(str)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getStateBuffer">
<code class="descname">getStateBuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getStateBuffer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getStateBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get buffer (history) of macro execution states.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(seq&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroExecutor.getExceptionStr">
<code class="descname">getExceptionStr</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#BaseMacroExecutor.getExceptionStr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroExecutor.getExceptionStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get macro exception type representation (None if the macro state
is not exception).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(str)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="macroexecutorfactory">
<h2>MacroExecutorFactory<a class="headerlink" href="#macroexecutorfactory" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-9c2e588abe76eb0f10445e08d976d4d0e55300a2.png" alt="Inheritance diagram of MacroExecutorFactory" usemap="#inheritance71ca9fc148" class="inheritance"/>
<map id="inheritance71ca9fc148" name="inheritance71ca9fc148">
<area shape="rect" id="node1" title="A scheme&#45;agnostic factory for MacroExecutor instances" alt="" coords="5,92,168,131"/>
<area shape="rect" id="node2" title="This class allows Singleton objects" alt="" coords="45,5,128,44"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory">
<em class="property">class </em><code class="descname">MacroExecutorFactory</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#MacroExecutorFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>A scheme-agnostic factory for MacroExecutor instances</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span>  <span class="n">MacroExecutorFactory</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">getMacroExecutor</span><span class="p">(</span><span class="s1">&#39;tango://my/door/name&#39;</span><span class="p">)</span> <span class="c1">#returns a TangoMacroExecutor</span>
</pre></div>
</div>
<p>Note: For the moment, only TangoMacroExecutor is supported</p>
<dl class="method">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory.getMacroExecutor">
<code class="descname">getMacroExecutor</code><span class="sig-paren">(</span><em>door_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/macroexecutor.html#MacroExecutorFactory.getMacroExecutor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory.getMacroExecutor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a macro executor instance (a subclass of
<a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroExecutor" title="sardana.macroserver.macros.test.BaseMacroExecutor"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroExecutor</span></code></a>) depending on the door being used.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.MacroExecutorFactory.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>*p</em>, <em>**k</em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.MacroExecutorFactory.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="basemacrotestcase">
<h2>BaseMacroTestCase<a class="headerlink" href="#basemacrotestcase" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-93b27eb027eeb934a45fc102ab6bbf7a0f3c7a04.png" alt="Inheritance diagram of BaseMacroTestCase" usemap="#inheritance11d1d58c15" class="inheritance"/>
<map id="inheritance11d1d58c15" name="inheritance11d1d58c15">
<area shape="rect" id="node1" title="An abstract class for macro testing." alt="" coords="5,5,156,44"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase">
<em class="property">class </em><code class="descname">BaseMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract class for macro testing.
BaseMacroTestCase will provide a <cite>macro_executor</cite> member which is an
instance of BaseMacroExecutor and which can be used to run a macro.</p>
<p>To use it, simply inherit from BaseMacroTestCase <em>and</em> unittest.TestCase
and provide the following class members:</p>
<blockquote>
<div><ul class="simple">
<li>macro_name (string) name of the macro to be tested</li>
<li><dl class="first docutils">
<dt>door_name (string) name of the door where the macro will be executed.</dt>
<dd>This is optional. If not set,
<cite>sardanacustomsettings.UNITTEST_DOOR_NAME</cite> is used</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Then you may define test methods.</p>
<dl class="attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.macro_name">
<code class="descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.door_name">
<code class="descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>A macro_executor instance must be created</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.BaseMacroTestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#BaseMacroTestCase.tearDown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.BaseMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="runmacrotestcase">
<h2>RunMacroTestCase<a class="headerlink" href="#runmacrotestcase" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-64bdf964ffa7eb9c073f623ff66170c77d6af1da.png" alt="Inheritance diagram of RunMacroTestCase" usemap="#inheritance4e5f4c7d51" class="inheritance"/>
<map id="inheritance4e5f4c7d51" name="inheritance4e5f4c7d51">
<area shape="rect" id="node1" title="An abstract class for macro testing." alt="" coords="5,5,156,44"/>
<area shape="rect" id="node2" title="A base class for testing execution of arbitrary Sardana macros." alt="" coords="10,92,151,131"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase">
<em class="property">class </em><code class="descname">RunMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for testing execution of arbitrary Sardana macros.
See <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroTestCase</span></code></a> for requirements.</p>
<dl class="docutils">
<dt>It provides the following helper methods:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs"><code class="xref py py-meth docutils literal"><span class="pre">macro_runs()</span></code></a></li>
<li><a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_fails" title="sardana.macroserver.macros.test.RunMacroTestCase.macro_fails"><code class="xref py py-meth docutils literal"><span class="pre">macro_fails()</span></code></a></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.assertFinished">
<code class="descname">assertFinished</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.assertFinished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.assertFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro has finished.</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.setUp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconditions:
- Those from <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroTestCase</span></code></a>
- the macro executor registers to all the log levels</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_runs">
<code class="descname">macro_runs</code><span class="sig-paren">(</span><em>macro_name=None</em>, <em>macro_params=None</em>, <em>wait_timeout=None</em>, <em>data=0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.macro_runs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully executed for the given input parameters. It may also
optionally perform checks on the outputs from the execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (str) macro name (takes precedence over macro_name
class member)</li>
<li><strong>macro_params</strong> &#8211; (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</li>
<li><strong>wait_timeout</strong> &#8211; (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout is
used (None).</li>
<li><strong>data</strong> &#8211; (obj) Optional. If passed, the macro data after the
execution is tested to be equal to this.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_fails">
<code class="descname">macro_fails</code><span class="sig-paren">(</span><em>macro_name=None</em>, <em>macro_params=None</em>, <em>wait_timeout=None</em>, <em>exception=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunMacroTestCase.macro_fails"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_fails" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the macro fails to run for the given input parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (str) macro name (takes precedence over macro_name
class member)</li>
<li><strong>macro_params</strong> &#8211; (seq&lt;str&gt;) input parameters for the macro</li>
<li><strong>wait_timeout</strong> &#8211; maximum allowed time for the macro to fail. By
default infinite timeout (None) is used.</li>
<li><strong>exception</strong> &#8211; (str or Exception) if given, an additional check of
the type of the exception is done.
(IMPORTANT: this is just a comparison of str
representations of exception objects)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.door_name">
<code class="descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.macro_name">
<code class="descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunMacroTestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="runstopmacrotestcase">
<h2>RunStopMacroTestCase<a class="headerlink" href="#runstopmacrotestcase" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-547ce5f6a6b5ea5cffc47221cbc9d77a5dd714c0.png" alt="Inheritance diagram of RunStopMacroTestCase" usemap="#inheritance0bcf4afe4a" class="inheritance"/>
<map id="inheritance0bcf4afe4a" name="inheritance0bcf4afe4a">
<area shape="rect" id="node1" title="An abstract class for macro testing." alt="" coords="15,5,166,44"/>
<area shape="rect" id="node2" title="A base class for testing execution of arbitrary Sardana macros." alt="" coords="20,92,161,131"/>
<area shape="rect" id="node3" title="This is an extension of :class:`RunMacroTestCase` to include helpers for" alt="" coords="5,179,176,217"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase">
<em class="property">class </em><code class="descname">RunStopMacroTestCase</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an extension of <a class="reference internal" href="#sardana.macroserver.macros.test.RunMacroTestCase" title="sardana.macroserver.macros.test.RunMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">RunMacroTestCase</span></code></a> to include helpers for
testing the abort process of a macro. Useful for Runnable and Stopable
macros.</p>
<p>It provides the <a class="reference internal" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops" title="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops"><code class="xref py py-meth docutils literal"><span class="pre">macro_stops()</span></code></a> helper</p>
<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.assertStopped">
<code class="descname">assertStopped</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase.assertStopped"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.assertStopped" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro was stopped</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops">
<code class="descname">macro_stops</code><span class="sig-paren">(</span><em>macro_name=None</em>, <em>macro_params=None</em>, <em>stop_delay=0.1</em>, <em>wait_timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/base.html#RunStopMacroTestCase.macro_stops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_stops" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully stoped (a.k.a. aborted) after it has been launched.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (str) macro name (takes precedence over macro_name
class member)</li>
<li><strong>macro_params</strong> &#8211; (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</li>
<li><strong>stop_delay</strong> &#8211; (float) Time (in s) to wait between launching the
macro and sending the stop command. default=0.1</li>
<li><strong>wait_timeout</strong> &#8211; (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout (None) is
used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.assertFinished">
<code class="descname">assertFinished</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.assertFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that macro has finished.</p>
</dd></dl>

<dl class="attribute">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.door_name">
<code class="descname">door_name</code><em class="property"> = 'door/demo1/1'</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.door_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_fails">
<code class="descname">macro_fails</code><span class="sig-paren">(</span><em>macro_name=None</em>, <em>macro_params=None</em>, <em>wait_timeout=None</em>, <em>exception=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_fails" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the macro fails to run for the given input parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (str) macro name (takes precedence over macro_name
class member)</li>
<li><strong>macro_params</strong> &#8211; (seq&lt;str&gt;) input parameters for the macro</li>
<li><strong>wait_timeout</strong> &#8211; maximum allowed time for the macro to fail. By
default infinite timeout (None) is used.</li>
<li><strong>exception</strong> &#8211; (str or Exception) if given, an additional check of
the type of the exception is done.
(IMPORTANT: this is just a comparison of str
representations of exception objects)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_name">
<code class="descname">macro_name</code><em class="property"> = None</em><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.macro_runs">
<code class="descname">macro_runs</code><span class="sig-paren">(</span><em>macro_name=None</em>, <em>macro_params=None</em>, <em>wait_timeout=None</em>, <em>data=0</em><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.macro_runs" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method to create tests that check if the macro can be
successfully executed for the given input parameters. It may also
optionally perform checks on the outputs from the execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>macro_name</strong> &#8211; (str) macro name (takes precedence over macro_name
class member)</li>
<li><strong>macro_params</strong> &#8211; (seq&lt;str&gt;): parameters for running the macro.
If passed, they must be given as a sequence of
their string representations.</li>
<li><strong>wait_timeout</strong> &#8211; (float) maximum allowed time (in s) for the macro
to finish. By default infinite timeout is
used (None).</li>
<li><strong>data</strong> &#8211; (obj) Optional. If passed, the macro data after the
execution is tested to be equal to this.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.setUp">
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Preconditions:
- Those from <a class="reference internal" href="#sardana.macroserver.macros.test.BaseMacroTestCase" title="sardana.macroserver.macros.test.BaseMacroTestCase"><code class="xref py py-class docutils literal"><span class="pre">BaseMacroTestCase</span></code></a>
- the macro executor registers to all the log levels</p>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.RunStopMacroTestCase.tearDown">
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sardana.macroserver.macros.test.RunStopMacroTestCase.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>The macro_executor instance must be removed</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sardemoenv">
<h2>SarDemoEnv<a class="headerlink" href="#sardemoenv" title="Permalink to this headline">¶</a></h2>
<img src="../../_images/inheritance-2a992bb9efc492ab6d143b6a504f2384a3a24067.png" alt="Inheritance diagram of SarDemoEnv" usemap="#inheritance6a03468580" class="inheritance"/>
<map id="inheritance6a03468580" name="inheritance6a03468580">
<area shape="rect" id="node1" title="Class to get _SAR_DEMO environment variable with cross checking with" alt="" coords="5,92,112,131"/>
<area shape="rect" id="node2" title="This class allows Singleton objects" alt="" coords="17,5,100,44"/>
</map>
<dl class="class">
<dt id="sardana.macroserver.macros.test.SarDemoEnv">
<em class="property">class </em><code class="descname">SarDemoEnv</code><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to get _SAR_DEMO environment variable with cross checking with
the MacroServer (given by <code class="xref py py-attr docutils literal"><span class="pre">UNITTEST_DOOR_NAME</span></code>)</p>
<dl class="attribute">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.ready">
<code class="descname">ready</code><em class="property"> = False</em><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.ready" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.init">
<code class="descname">init</code><span class="sig-paren">(</span><em>door_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getElements">
<code class="descname">getElements</code><span class="sig-paren">(</span><em>elem_type='all'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getElements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getElements" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of sardemo element(s) of given elem type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>elem_type</strong> &#8211; (str) type of elemnts to return (all by default)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getMoveables">
<code class="descname">getMoveables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getMoveables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getMoveables" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of moveable(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getControllers">
<code class="descname">getControllers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getControllers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getControllers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of controllers(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getCTs">
<code class="descname">getCTs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getCTs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getCTs" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of counter timer exp channel(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getMotors">
<code class="descname">getMotors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getMotors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getMotors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of motor(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getPseudoMotors">
<code class="descname">getPseudoMotors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getPseudoMotors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getPseudoMotors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of pseudomotor(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getZerods">
<code class="descname">getZerods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getZerods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getZerods" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of zerod exp channel(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getOneds">
<code class="descname">getOneds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getOneds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getOneds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of one exp channel(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.getTwods">
<code class="descname">getTwods</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.getTwods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.getTwods" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of two exp channel(s) defined by SarDemo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(list&lt;str&gt;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sardana.macroserver.macros.test.SarDemoEnv.changeDoor">
<code class="descname">changeDoor</code><span class="sig-paren">(</span><em>door_name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/sardana/macroserver/macros/test/sardemoenv.html#SarDemoEnv.changeDoor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sardana.macroserver.macros.test.SarDemoEnv.changeDoor" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the door name and reset all lists</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../guide_migration.html" class="btn btn-neutral float-right" title="Sardana migration guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sardana/sardanavalue.html" class="btn btn-neutral" title="sardanavalue" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.0.2-alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>