

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Macro Hooks &mdash; sardana 3.0.4-alpha documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Macro Environment" href="macro_environment.html" />
    <link rel="prev" title="Adding real elements" href="adding_elements.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> sardana
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="http://www.sardana-controls.org">Home Page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sardana-org/sardana">Project Page</a></li>
<li class="toctree-l1"><a class="reference external" href="http://pypi.python.org/pypi/sardana">Download from PyPI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../docs.html">Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">User’s Guide</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started/index.html">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="spock.html">Spock</a></li>
<li class="toctree-l3"><a class="reference internal" href="taurus/index.html">Sardana-Taurus Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="scan.html">Scans</a></li>
<li class="toctree-l3"><a class="reference internal" href="motion.html">Motion</a></li>
<li class="toctree-l3"><a class="reference internal" href="acquisition.html">Acquisition</a></li>
<li class="toctree-l3"><a class="reference internal" href="diffractometer.html">Diffractometer</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding_elements.html">Adding real elements</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Macro Hooks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-hooks">General Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="macro_environment.html">Macro Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="macro_logging_and_reports.html">Macro Logging and Reports</a></li>
<li class="toctree-l3"><a class="reference internal" href="environment_variable_catalog.html">Environment Variable Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard_macro_catalog.html">Standard macro catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration/index.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="screenshots.html">Screenshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l3"><a class="reference external" href="https://github.com/sardana-org/sardana/issues?q=is:issue+is:open+label:doc:knownbug">Known Problems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devel/index.html">Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sep/index.html">Sardana Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_versions.html">Docs for other Sardana versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana-plugins">Plugins Catalogue</a></li>
<li class="toctree-l1"><a class="reference external" href="http://github.com/sardana-org/sardana/wiki">Wiki</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sardana</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../docs.html">Sardana 3.0 Documentation</a> &raquo;</li>
        
          <li><a href="index.html">User’s Guide</a> &raquo;</li>
        
      <li>Macro Hooks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/users/macro_hooks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="macro-hooks">
<span id="sardana-macros-hooks"></span><h1>Macro Hooks<a class="headerlink" href="#macro-hooks" title="Permalink to this headline">¶</a></h1>
<p>A hook is an extra code that can be run at certain points of a macro execution.
These points, called <em>hook places</em> are predefined for each <em>hookable</em> macro.
The hook place tells the macro how and when to run the attached hook.
Hooks allow the customization of already existing macros and can be added
using three different ways:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sardana-macros-hooks-general"><span class="std std-ref">General Hooks</span></a></p></li>
<li><p><a class="reference internal" href="taurus/sequencer.html#sequencer-ui"><span class="std std-ref">Sequencer Hooks</span></a></p></li>
<li><p><a class="reference internal" href="../devel/howto_macros/macros_general.html#sardana-macro-adding-hooks-support"><span class="std std-ref">Programmatic Hooks</span></a></p></li>
</ul>
<p>All available macros can be used as a hook.</p>
<div class="section" id="general-hooks">
<span id="sardana-macros-hooks-general"></span><h2>General Hooks<a class="headerlink" href="#general-hooks" title="Permalink to this headline">¶</a></h2>
<p>The general hooks were implemented in Sardana after the programmatic hooks.
The motivation for this implementation was to allow the customization
of the scan macros without having to redefine them. The general hooks apply
to all hookable macros.</p>
<p>They can be controlled using dedicated macros:
<a class="reference internal" href="../devel/api/sardana/macroserver/macros/env.html#sardana.macroserver.macros.env.lsgh" title="sardana.macroserver.macros.env.lsgh"><code class="xref py py-class docutils literal notranslate"><span class="pre">lsgh</span></code></a>,
<a class="reference internal" href="../devel/api/sardana/macroserver/macros/env.html#sardana.macroserver.macros.env.defgh" title="sardana.macroserver.macros.env.defgh"><code class="xref py py-class docutils literal notranslate"><span class="pre">defgh</span></code></a> and
<a class="reference internal" href="../devel/api/sardana/macroserver/macros/env.html#sardana.macroserver.macros.env.udefgh" title="sardana.macroserver.macros.env.udefgh"><code class="xref py py-class docutils literal notranslate"><span class="pre">udefgh</span></code></a>.
For each hook place, several hooks can be attached, they will be run in the
order they were added. The same hook can be run several times in the same
place if it was added several times.</p>
<p>Examples:</p>
<ul class="simple">
<li><p>Check motor limits in step scans (pre-scan)</p></li>
<li><p>Prepare 2D detectors: create directories, set save directory, file name,
file index (pre-scan)</p></li>
<li><p>Set attenuators, set undulator, check shutter, check current (pre-scan)</p></li>
<li><p>Restore changes (post-scan)</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="macro_environment.html" class="btn btn-neutral float-right" title="Macro Environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="adding_elements.html" class="btn btn-neutral float-left" title="Adding real elements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Except where otherwise noted, content on this site is
licensed under a Creative Commons Attribution 3.0 License.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>